<!DOCTYPE html>
<html lang="en">
    <head>
        <title>upnext.fm user scripts</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Official upnext.fm user scripting repository and documentation.">
        <link href="favicon.ico" rel="shortcut icon" type="image/x-icon">
        <link href="favicon.ico" rel="icon" type="image/x-icon">
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
        <link href="assets/site.css" rel="stylesheet">
        <link href="assets/prism.css" rel="stylesheet">
    </head>
    <body>
    <div id="main">
        <header>
            <img src="images/logo.png" />
            <h1>Official upnext.fm user script repository and documentation.</h1>
        </header>

        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
            <li role="presentation" class="active">
                <a href="#scripts" aria-controls="home" role="tab" data-toggle="tab">Scripts</a>
            </li>
            <li role="presentation">
                <a href="#docs" aria-controls="profile" role="tab" data-toggle="tab">Documentation</a>
            </li>
        </ul>
        
        <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade in active" id="scripts">
                <ul id="scripts-list">
    
        <li id="script-gradients-js" class="script-item card">
            <div class="script-header">
                <h2>
                    <a href="gradients.js">Gradients</a>
                    <a href="#script-gradients-js" class="glyphicon glyphicon-link pull-right" title="Permalink"></a>
                </h2>
                <ul class="scripts-meta-list">
                    <li><strong>Version:</strong> 2.2.3</li>
                    <li><strong>Author:</strong> headzoo</li>
                </ul>
                <div class="input-group">
                    <input value="https://scripts.upnext.fm/gradients.js" type="text" class="form-control" readonly />
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-copy" type="button">Copy</button>
                            </span>
                </div>
            </div>
            <p>Applies a color gradient to the messages you send.</p>

            
                
                    <div class="screenshot">
                        <img src="https://scripts.upnext.fm/images/gradients.png" alt="Screenshot" />
                        <small>Example gradient messages.</small>
                    </div>
                
                    <div class="screenshot">
                        <img src="https://scripts.upnext.fm/images/gradients_options.png" alt="Screenshot" />
                        <small>The options menu.</small>
                    </div>
                
            

            <a href="#main" class="top">
                <span class="glyphicon glyphicon-chevron-up"></span>
                Back to Top
            </a>
        </li>
    
        <li id="script-greentext-js" class="script-item card">
            <div class="script-header">
                <h2>
                    <a href="greentext.js">Greentext</a>
                    <a href="#script-greentext-js" class="glyphicon glyphicon-link pull-right" title="Permalink"></a>
                </h2>
                <ul class="scripts-meta-list">
                    <li><strong>Version:</strong> 1.0</li>
                    <li><strong>Author:</strong> az4521</li>
                </ul>
                <div class="input-group">
                    <input value="https://scripts.upnext.fm/greentext.js" type="text" class="form-control" readonly />
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-copy" type="button">Copy</button>
                            </span>
                </div>
            </div>
            <p>Lets you do greentext by prefixing your message with the &gt; character.</p>

            

            <a href="#main" class="top">
                <span class="glyphicon glyphicon-chevron-up"></span>
                Back to Top
            </a>
        </li>
    
        <li id="script-hide-bots-js" class="script-item card">
            <div class="script-header">
                <h2>
                    <a href="hide-bots.js">Hide Bots</a>
                    <a href="#script-hide-bots-js" class="glyphicon glyphicon-link pull-right" title="Permalink"></a>
                </h2>
                <ul class="scripts-meta-list">
                    <li><strong>Version:</strong> 1.2</li>
                    <li><strong>Author:</strong> headzoo</li>
                </ul>
                <div class="input-group">
                    <input value="https://scripts.upnext.fm/hide-bots.js" type="text" class="form-control" readonly />
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-copy" type="button">Copy</button>
                            </span>
                </div>
            </div>
            <p>Hides channel bots from the users list.</p>

            

            <a href="#main" class="top">
                <span class="glyphicon glyphicon-chevron-up"></span>
                Back to Top
            </a>
        </li>
    
        <li id="script-last_seen-js" class="script-item card">
            <div class="script-header">
                <h2>
                    <a href="last_seen.js">Last Seen</a>
                    <a href="#script-last_seen-js" class="glyphicon glyphicon-link pull-right" title="Permalink"></a>
                </h2>
                <ul class="scripts-meta-list">
                    <li><strong>Version:</strong> 1.0</li>
                    <li><strong>Author:</strong> headzoo</li>
                </ul>
                <div class="input-group">
                    <input value="https://scripts.upnext.fm/last_seen.js" type="text" class="form-control" readonly />
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-copy" type="button">Copy</button>
                            </span>
                </div>
            </div>
            <p>Creates a /seen command which displays the last time a user was seen in the lobby. For example &#39;/seen headzoo&#39;.</p>

            

            <a href="#main" class="top">
                <span class="glyphicon glyphicon-chevron-up"></span>
                Back to Top
            </a>
        </li>
    
        <li id="script-lucky-js" class="script-item card">
            <div class="script-header">
                <h2>
                    <a href="lucky.js">Lucky</a>
                    <a href="#script-lucky-js" class="glyphicon glyphicon-link pull-right" title="Permalink"></a>
                </h2>
                <ul class="scripts-meta-list">
                    <li><strong>Version:</strong> 1.1</li>
                    <li><strong>Author:</strong> headzoo</li>
                </ul>
                <div class="input-group">
                    <input value="https://scripts.upnext.fm/lucky.js" type="text" class="form-control" readonly />
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-copy" type="button">Copy</button>
                            </span>
                </div>
            </div>
            <p>Creates a `/lucky` command, which searches YouTube using the query following the command, and queues the first video found.</p>

            

            <a href="#main" class="top">
                <span class="glyphicon glyphicon-chevron-up"></span>
                Back to Top
            </a>
        </li>
    
        <li id="script-macros-js" class="script-item card">
            <div class="script-header">
                <h2>
                    <a href="macros.js">Macros</a>
                    <a href="#script-macros-js" class="glyphicon glyphicon-link pull-right" title="Permalink"></a>
                </h2>
                <ul class="scripts-meta-list">
                    <li><strong>Version:</strong> 1.2</li>
                    <li><strong>Author:</strong> headzoo</li>
                </ul>
                <div class="input-group">
                    <input value="https://scripts.upnext.fm/macros.js" type="text" class="form-control" readonly />
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-copy" type="button">Copy</button>
                            </span>
                </div>
            </div>
            <p>Gives users the option to create macros, or &#39;shortcuts&#39; for long messages.</p>

            
                
                    <div class="screenshot">
                        <img src="https://scripts.upnext.fm/images/macros_options.png" alt="Screenshot" />
                        <small>The options menu.</small>
                    </div>
                
            

            <a href="#main" class="top">
                <span class="glyphicon glyphicon-chevron-up"></span>
                Back to Top
            </a>
        </li>
    
        <li id="script-protection-js" class="script-item card">
            <div class="script-header">
                <h2>
                    <a href="protection.js">Protection</a>
                    <a href="#script-protection-js" class="glyphicon glyphicon-link pull-right" title="Permalink"></a>
                </h2>
                <ul class="scripts-meta-list">
                    <li><strong>Version:</strong> 1.9.3</li>
                    <li><strong>Author:</strong> headzoo</li>
                </ul>
                <div class="input-group">
                    <input value="https://scripts.upnext.fm/protection.js" type="text" class="form-control" readonly />
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-copy" type="button">Copy</button>
                            </span>
                </div>
            </div>
            <p>Provides protection against trolls and other nasty users.</p>

            
                
                    <div class="screenshot">
                        <img src="https://scripts.upnext.fm/images/protection_options.png" alt="Screenshot" />
                        <small>The options menu.</small>
                    </div>
                
            

            <a href="#main" class="top">
                <span class="glyphicon glyphicon-chevron-up"></span>
                Back to Top
            </a>
        </li>
    
        <li id="script-react-js" class="script-item card">
            <div class="script-header">
                <h2>
                    <a href="react.js">React</a>
                    <a href="#script-react-js" class="glyphicon glyphicon-link pull-right" title="Permalink"></a>
                </h2>
                <ul class="scripts-meta-list">
                    <li><strong>Version:</strong> 1.5.1</li>
                    <li><strong>Author:</strong> headzoo</li>
                </ul>
                <div class="input-group">
                    <input value="https://scripts.upnext.fm/react.js" type="text" class="form-control" readonly />
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-copy" type="button">Copy</button>
                            </span>
                </div>
            </div>
            <p>Creates a `/react` command, which displays a random image from http://replygif.net based on your search term. Now includes auto complete suggestions.</p>

            

            <a href="#main" class="top">
                <span class="glyphicon glyphicon-chevron-up"></span>
                Back to Top
            </a>
        </li>
    
        <li id="script-scriptster-js" class="script-item card">
            <div class="script-header">
                <h2>
                    <a href="scriptster.js">Scriptster</a>
                    <a href="#script-scriptster-js" class="glyphicon glyphicon-link pull-right" title="Permalink"></a>
                </h2>
                <ul class="scripts-meta-list">
                    <li><strong>Version:</strong> 1.1</li>
                    <li><strong>Author:</strong> headzoo</li>
                </ul>
                <div class="input-group">
                    <input value="https://scripts.upnext.fm/scriptster.js" type="text" class="form-control" readonly />
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-copy" type="button">Copy</button>
                            </span>
                </div>
            </div>
            <p>Tools for upnext.fm script writers. Turns the script editor into a full IDE and adds a &#39;Scripting&#39; button to the site navigation bar.</p>

            
                
                    <div class="screenshot">
                        <img src="https://scripts.upnext.fm/images/scriptster_options.png" alt="Screenshot" />
                        <small>The editor with options showing.</small>
                    </div>
                
            

            <a href="#main" class="top">
                <span class="glyphicon glyphicon-chevron-up"></span>
                Back to Top
            </a>
        </li>
    
        <li id="script-azannoybutton-js" class="script-item card">
            <div class="script-header">
                <h2>
                    <a href="azannoybutton.js">Az Irritation Button</a>
                    <a href="#script-azannoybutton-js" class="glyphicon glyphicon-link pull-right" title="Permalink"></a>
                </h2>
                <ul class="scripts-meta-list">
                    <li><strong>Version:</strong> 1.B</li>
                    <li><strong>Author:</strong> az4521</li>
                </ul>
                <div class="input-group">
                    <input value="https://scripts.upnext.fm/azannoybutton.js" type="text" class="form-control" readonly />
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-copy" type="button">Copy</button>
                            </span>
                </div>
            </div>
            <p>Adds a button that sends a message to a bot. bot then adds to a count of irritations per username. super basic.</p>

            

            <a href="#main" class="top">
                <span class="glyphicon glyphicon-chevron-up"></span>
                Back to Top
            </a>
        </li>
    
        <li id="script-8ball-js" class="script-item card">
            <div class="script-header">
                <h2>
                    <a href="8ball.js">Magic 8 Ball</a>
                    <a href="#script-8ball-js" class="glyphicon glyphicon-link pull-right" title="Permalink"></a>
                </h2>
                <ul class="scripts-meta-list">
                    <li><strong>Version:</strong> 1.1</li>
                    <li><strong>Author:</strong> headzoo</li>
                </ul>
                <div class="input-group">
                    <input value="https://scripts.upnext.fm/8ball.js" type="text" class="form-control" readonly />
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-copy" type="button">Copy</button>
                            </span>
                </div>
            </div>
            <p>Creates a /8ball command which finds answers to your questions from beyond our realm. Is it really magic? No one knows for sure. Only one person in the room should run this script.</p>

            

            <a href="#main" class="top">
                <span class="glyphicon glyphicon-chevron-up"></span>
                Back to Top
            </a>
        </li>
    
        <li id="script-ping-js" class="script-item card">
            <div class="script-header">
                <h2>
                    <a href="ping.js">Ping</a>
                    <a href="#script-ping-js" class="glyphicon glyphicon-link pull-right" title="Permalink"></a>
                </h2>
                <ul class="scripts-meta-list">
                    <li><strong>Version:</strong> 1.1</li>
                    <li><strong>Author:</strong> headzoo</li>
                </ul>
                <div class="input-group">
                    <input value="https://scripts.upnext.fm/ping.js" type="text" class="form-control" readonly />
                            <span class="input-group-btn">
                                <button class="btn btn-default btn-copy" type="button">Copy</button>
                            </span>
                </div>
            </div>
            <p>Displays your server ping time in the top right hand corner of the page.</p>

            

            <a href="#main" class="top">
                <span class="glyphicon glyphicon-chevron-up"></span>
                Back to Top
            </a>
        </li>
    
</ul>
            </div>

            <div role="tabpanel" class="tab-pane fade" id="docs">
                

<div id="docs-container" class="col-lg-10 col-md-10">
    <p>
        The site supports user scripting, which allows you to inject your own Javascript into <i>your</i>
        browser when you are inside of a channel. In addition, a light-weight API is provided so that
        you may build "bots" with user scripts.
    </p>
    <p>
        User scripts are created from the Options -> Scripting dialog. Your script are executed after clicking
        save, and when you enter the channel. You can put all of your code into the "Default" text box, or you
        can organize your scripts in multiple files. Which are shown as multiple tabs in on the scripting
        dialog.
    </p>
    
    <div id="docs-table-of-contents" class="list-style-type-none">
        <div class="docs-toc-col col-sm-6">
            <a href="#topic-overview-api" class="docs-tc-root">API</a>
            <ul>
                <li><a href="#topic-api-api">$api</a></li>
                <li><a href="#topic-api-channel">$channel</a></li>
                <li><a href="#topic-api-user">$user</a></li>
                <li><a href="#topic-api-options">$options</a></li>
                <li><a href="#topic-api-proxy">$proxy</a></li>
                <li><a href="#topic-api-store">$store</a></li>
                <li><a href="#topic-api-script">$script</a></li>
                <li><a href="#topic-api-first-script">First Script</a></li>
            </ul>

            <a href="#topic-api-methods" class="docs-tc-root" style="display:block;margin-top: 20px;">Methods</a>
            <ul>
                <li><a href="#topic-api-methods-set-storage">$store.local.set()</a></li>
                <li><a href="#topic-api-methods-get-storage">$store.local.get()</a></li>
                <li><a href="#topic-api-methods-remove-storage">$store.local.remove()</a></li>
                <li><a href="#topic-api-methods-set-database">$store.database.set()</a></li>
                <li><a href="#topic-api-methods-get-database">$store.database.get()</a></li>
                <li><a href="#topic-api-methods-remove-database">$store.database.remove()</a></li>
                <li><a href="#topic-api-methods-keys-database">$store.database.keys()</a></li>
                <li><a href="#topic-api-methods-send">$api.send()</a></li>
                <li><a href="#topic-api-methods-notice">$api.notice()</a></li>
                <li><a href="#topic-api-methods-command">$api.command()</a></li>
                <li><a href="#topic-api-methods-toast">$api.toast()</a></li>
                <li><a href="#topic-api-methods-queue">$api.queue()</a></li>
                <li><a href="#topic-api-methods-dequeue-by-name">$api.dequeueByName()</a></li>
                <li><a href="#topic-api-methods-skip">$api.skip()</a></li>
                <li><a href="#topic-api-methods-vote">$api.vote()</a></li>
                <li><a href="#topic-api-methods-playlist-clear">$api.playlistClear()</a></li>
                <li><a href="#topic-api-methods-playlist-shuffle">$api.playlistShuffle()</a></li>
                <li><a href="#topic-api-methods-playlist-lock">$api.playlistLock()</a></li>
                <li><a href="#topic-api-methods-search">$api.search()</a></li>
                <li><a href="#topic-api-methods-clear">$api.clear()</a></li>
                <li><a href="#topic-api-methods-color">$api.color()</a></li>
                <li><a href="#topic-api-methods-ignore">$api.ignore()</a></li>
                <li><a href="#topic-api-methods-unignore">$api.unignore()</a></li>
                <li><a href="#topic-api-methods-kick">$api.kick()</a></li>
                <li><a href="#topic-api-methods-mute">$api.mute()</a></li>
                <li><a href="#topic-api-methods-smute">$api.smute()</a></li>
                <li><a href="#topic-api-methods-unmute">$api.unmute()</a></li>
                <li><a href="#topic-api-methods-ban-by-name">$api.banByName()</a></li>
                <li><a href="#topic-api-methods-ban-by-ip">$api.banByIP()</a></li>
            </ul>
        </div>
        
        <div class="docs-toc-col col-sm-6">
            <a href="#topic-api-events" class="docs-tc-root">Events</a>
            <ul>
                <li><a href="#topic-api-events-loaded">loaded</a></li>
                <li><a href="#topic-api-events-reloaded">reloaded</a></li>
                <li><a href="#topic-api-events-delete-script">delete_script</a></li>
                <li><a href="#topic-api-events-receive">receive</a></li>
                <li><a href="#topic-api-events-send">send</a></li>
                <li><a href="#topic-api-events-notice">notice</a></li>
                <li><a href="#topic-api-events-whisper">whisper</a></li>
                <li><a href="#topic-api-events-command">command</a></li>
                <li><a href="#topic-api-events-user-join">user_join</a></li>
                <li><a href="#topic-api-events-user-leave">user_leave</a></li>
                <li><a href="#topic-api-events-playlist">playlist</a></li>
                <li><a href="#topic-api-events-queue">queue</a></li>
                <li><a href="#topic-api-events-media-change">media_change</a></li>
                <li><a href="#topic-api-events-media-update">media_update</a></li>
                <li><a href="#topic-api-events-favorites">favorites</a></li>
                <li><a href="#topic-api-events-favorite-add">favorite_add</a></li>
                <li><a href="#topic-api-events-tags">tags</a></li>
                <li><a href="#topic-api-events-votes">votes</a></li>
                <li><a href="#topic-api-events-vote-value">vote_value</a></li>
                <li><a href="#topic-api-events-emotes-personal">emotes_personal</a></li>
                <li><a href="#topic-api-events-emotes-channel">emotes_channel</a></li>
                <li><a href="#topic-api-events-afk">afk</a></li>
                <li><a href="#topic-api-events-profile-menu">profile_menu</a></li>
                <li><a href="#topic-api-events-user-options-save">user_options_save</a></li>
                <li><a href="#topic-api-events-channel-option-save">channel_option_save</a></li>
                <li><a href="#topic-api-events-save-scripts">save_scripts</a></li>
                <li><a href="#topic-api-events-search-results">search_results</a></li>
                <li><a href="#topic-api-events-color-change">color_change</a></li>
            </ul>
        </div>

        <div class="docs-toc-col col-sm-6">
            <a href="#topic-properties" class="docs-tc-root">Properties</a>
            <ul>
                <li><a href="#topic-properties-version">version</a></li>
            </ul>
        </div>
        
        <div class="docs-toc-col col-sm-6">
            <a href="#topic-examples" class="docs-tc-root">Examples</a>
            <ul>
                <li><a href="#topic-api-examples-favorites">Queuing Favorites</a></li>
                <li><a href="#topic-api-examples-lucky">I'm Feeling Lucky</a></li>
            </ul>
        </div>
    </div>
    
    <section class="card">
        <h3 id="topic-overview-api">API</h3>
<p>
    Several objects are available to user scripts.
</p>
<ul style="margin:0;padding:0;list-style-type:none;">
    <li>
        <code id="topic-api-api" class="signature">$api</code>
        <p>
            Provides an interface to the chat API. The rest of this documentation covers the properties,
            methods, and events related to this object.
        </p>
    </li>
    <li>
        <code id="topic-api-channel" class="signature">$channel</code>
        <p>
            An object containing information about the channel you are in. The object contains several properties.
        </p>
        <pre style="margin-top: 12px;">
            <code class="language-javascript">
                {
                    bio: String,            // The channel bio/information.
                    css: String,            // The channel CSS.
                    js: String,             // The channel Javascript.
                    emotes: Array,          // An array of channel emotes.
                    motd: String,           // The channel message of the day.
                    name: String,           // The name of the channel.
                    usercount: Number       // The number of users in the channel.
                }
            </code>
        </pre>
    </li>
    <li>
        <code id="topic-api-user" class="signature">$user</code>
        <p>
            An object containing information about you. The object contains several properties.
        </p>
        <pre style="margin-top: 12px;">
            <code class="language-javascript">
                {
                    emotes: Array,          // An array of your personal emotes.
                    name: String,           // Your username.
                    profile: Object,        // Your profile information.
                    rank: Number            // Your channel rank.
                }
            </code>
        </pre>
    </li>
    <li>
        <code id="topic-api-options" class="signature">$options</code>
        <p>
            Reference to an object which represents the channel Options menu. It can be used
            to add additional options to the menu.
        </p>
    </li>
    <li>
        <code id="topic-api-proxy" class="signature">$proxy</code>
        <p>
            Wrapper for jQuery ajax shorthand methods, which sends request through the site proxy.
            Helps to get around CORS and TLS/SSL issues when making remote requests.
            See <a href="http://api.jquery.com/category/ajax/shorthand-methods" target="_blank">http://api.jquery.com/category/ajax/shorthand-methods</a>
        </p>
        <p>
            Contains the methods <code>$proxy.getJSON()</code>, <code>$proxy.getScript()</code>,
            <code>$proxy.get()</code>, and <code>$proxy.post()</code>.
        </p>
    </li>
    <li>
        <code id="topic-api-store" class="signature">$store</code>
        <p>
            Provides access to cookies, localStorage, and the site database key/value store.
            More information about the <code>$store</code> methods are covered in the
            <a href="#topic-api-methods" class="help-tc-root">methods</a> of this documentation.
        </p>
    </li>
    <li>
        <code id="topic-api-script" class="signature">$script</code>
        <p>
            Provides information about the script itself, as well as annotations found in the
            script doc block header.For instance when the user script contains the following doc block:
        </p>
        <pre style="margin-top: 12px;">
            <code class="language-javascript">
                /**
                * Name: Reaction GIFs
                * Version: 1.5
                * Author: headzoo
                *
                * Displays a random image from replygif.net based on your search term
                */
            </code>
        </pre>
        <p>
            The <code>$script</code> object will contain the following values:
        </p>
        <pre style="margin-top: 12px;">
            <code class="language-javascript">
                {
                    "filename": "react.js",
                    "is_first_run": false,
                    "Name": "Reaction GIFs",
                    "Version": "1.5",
                    "Author": "headzoo"
                }
            </code>
        </pre>
        <p>
            Note that <code>$script</code> also contains the script filename, and whether it's being run for
            the the first.
        </p>
    </li>
</ul>

<h5 id="topic-api-first-script">First Script</h5>
<p>
    From the site navigation menu click on Options and then Scripting. In the default text box,
    type (or paste) this code and click save.
</p>
<pre>
    <code class="language-javascript line-numbers">
        alert("Your username is " + $user.name + " and you are in the channel " + $channel.name);
    </code>
</pre>
        
    <a href="#top" class="top">
        <span class="glyphicon glyphicon-chevron-up"></span>
        Back to Top
    </a>

    </section>
    <section class="card">
        <h3 id="topic-properties">Properties</h3>
<code id="topic-properties-version" class="signature">$api.version</code>
<p>
    Version of the API implemented.
</p>
        
    <a href="#top" class="top">
        <span class="glyphicon glyphicon-chevron-up"></span>
        Back to Top
    </a>

    </section>
    <section class="card">
        <h3 id="topic-api-events">Events</h3>
<p>
    Interacting with the channel is mostly done through the use of event callbacks. The following code
    demonstrates the use of callbacks to CAPITALIZE every message you send. Callbacks are registered
    with events using the <code>$api.on()</code> method, which takes two arguments: the name of the
    event, and the callback function. The function will be called when an event with the given name
    is triggered.
</p>
<pre>
    <code class="language-javascript line-numbers">
        // Registers a callback which filters every message you send _before_ it gets sent
        // to the server, and subsequently broadcast to each user in the channel.
        $api.on("send", function(e, data) {
            // Every message you send will be automatically capitalized.
            data.msg = data.msg.toUpperCase();
        });
    </code>
</pre>
<pre>
    <code class="language-javascript line-numbers">
        // Registers a callback which filters every message you received from the server.
        $api.on("receive", function(e, data) {
            // Every message you receive will be automatically capitalized.
            data.msg = data.msg.toUpperCase();
        });
    </code>
</pre>

<h5>Event Names</h5>
<ul style="list-style-type: none; padding: 0;">
    <li id="topic-api-events-loaded">
        <code class="signature">loaded</code>
        Triggered after every page element has been loaded, and all user scripts have been loaded.
        Page elements are the user list, chat buffer, and video player. No data is passed to the callback.
    </li>
    <li id="topic-api-events-reloaded">
        <code class="signature">reloading</code>
        Triggered after the user scripts have been updated, and are about to be torn down and
        reinserted into the page. No data is passed to the callback.
    </li>
    <li id="topic-api-events-delete-script">
        <code class="signature">delete_script</code>
        Triggered before a script is deleted. The filename of the script being deleted is passed to the callback.
        This is triggered when any script is deleted, not just the script watching the event. Scripts should
        use <code>$script.filename</code> to check if its being deleted.
        <pre>
            <code class="language-javascript">
                $api.on("delete_script", function(e, filename) {
                    if ($script.filename == filename) {
                        console.log("Help! I'm being deleted!");
                    }
                });
            </code>
        </pre>
    </li>
    <li id="topic-api-events-receive">
        <code class="signature">receive</code>
        Triggered when a message is received from another user in the room. The callback gets a
        data object with the following properties.
        <pre>
            <code class="language-javascript">
                {
                    username: String,  // Name of the user that sent the message.
                    msg: String,       // The message sent by the user.
                    msg_clean: String, // Message without color codes.
                    time: Number,      // Time the message was sent.
                    meta: Object,      // Contains a "color" property with the text color.
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-send">
        <code class="signature">send</code>
        Triggered before sending a message to the other users in the room. The callback gets a data
        object which contains the details of your message.
        <pre>
            <code class="language-javascript">
                {
                    msg: String,  // The message you are sending.
                    meta: Object, // Contains a "color" property with your text color.
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-notice">
        <code class="signature">notice</code>
        Triggered when a notice is received from the server. Notices are used to notify users when
        someone up votes or favorites their videos.
        <pre>
            <code class="language-javascript">
                {
                    msg: String // The notice text
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-whisper">
        <code class="signature">whisper</code>
        Triggered when a whisper is received from another user. The callback gets an object which
        contains the whisper data.
        <pre>
            <code class="language-javascript">
                {
                    msg: String,  // The whisper text
                    meta: Object, // Meta information
                    time: Number, // Time the whisper was sent
                    name: String, // Name of the user who sent the whisper
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-command">
        <code class="signature">command</code>
        Triggered when the script receives a command. The callback gets an object which contains the
        command data.
        <pre>
            <code class="language-javascript">
                {
                    to: String,   // Name of the user receiving the command or "#" for the whole channel
                    from: String, // Name of the user that sent the command
                    data: Object  // The command data
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-user-join">
        <code class="signature">user_join</code>
        Triggered when a user joins the channel. The callback gets a data object with the user's details.
        <pre>
            <code class="language-javascript">
                {
                    name: String,  // The user's name
                    rank: Number,  // The user's rank
                    meta: Object,  // Contains properties such as "afk"
                    profile: Object, // Contains "image" (avatar url), and "text" (tagline)
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-user-leave">
        <code class="signature">user_leave</code>
        Triggered when a user leaves the channel. The callback gets an object with the user's name.
        <pre>
            <code class="language-javascript">
                {
                    name: String,  // The user's name
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-playlist">
        <code class="signature">playlist</code>
        Triggered when the channel receives the list of videos in the playlist. The callback gets an
        <i>array</i> of objects that describe each video.
        <pre>
            <code class="language-javascript">
                {
                    queueby: String,  // Name of the user that queued the video
                    media: Object     // Describes the video
                }
            </code>
        </pre>
        <p>
            The "media" property contains the following values.
        </p>
        <pre>
            <code class="language-javascript">
                {
                    duration: Number, // Human readable video duration, e.g. "00:00"
                    seconds: Number,  // Video duration in seconds
                    uid: String,      // Typically a YouTube video id
                    title: String,    // Title of the video
                    type: String,     // "yt" for YouTube videos, "sc" for soundcloud, etc
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-queue">
        <code class="signature">queue</code>
        Triggered before a video gets added to the playlist. The callback gets an object describing where
        the video is being added to the playlist, and a media object.
        <pre>
            <code class="language-javascript">
                {
                    after: Number,  // Video is being inserted after this index
                    item: Object    // Info about the video
                }
            </code>
        </pre>
        <p>
            The "item" property contains information about the video.
        </p>
        <pre>
            <code class="language-javascript">
                {
                    queueby: String,  // Name of the user that queued the video
                    media: Object     // Describes the video
                }
            </code>
        </pre>
        <p>
            The "media" property contains the following values.
        </p>
        <pre>
            <code class="language-javascript">
                {
                    duration: Number, // Human readable video duration, e.g. "00:00"
                    seconds: Number,  // Video duration in seconds
                    uid: String,      // Typically a YouTube video id
                    title: String,    // Title of the video
                    type: String,     // "yt" for YouTube videos, "sc" for soundcloud, etc
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-media-change">
        <code class="signature">media_change</code>
        Triggered before the next song in the playlist begins to play. The callback gets a media object.
        <pre>
            <code class="language-javascript">
                {
                    duration: Number,    // Human readable video duration, e.g. "00:00"
                    seconds: Number,     // Video duration in seconds
                    currentTime: Number, // Time where the video will start to play
                    paused: Boolean,     // Whether the video is paused
                    uid: String,         // Typically a YouTube video id
                    title: String,       // Title of the video
                    type: String,        // "yt" for YouTube videos, "sc" for soundcloud, etc
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-media-update">
        <code class="signature">media_update</code>
        Triggered when the time/synchronization information for the currently playing video updates.
        Typically fires every few seconds. The callback gets an object describing the position
        in the currently playing video.
        <pre>
            <code class="language-javascript">
                {
                    currentTime: Float, // Current position in seconds
                    paused: Boolean,    // Whether the video is paused
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-favorites">
        <code class="signature">favorites</code>
        Triggered when the server sends your list of favorited videos. The callback gets an <i>array</i>
        of objects describing each video.
        <pre>
            <code class="language-javascript">
                {
                    favorite_id: Number, // The favorite id
                    media_id: Number,    // The media id
                    seconds: Number,     // The video duration in seconds
                    time: Number,        // Date/time when the video was favorited
                    uid: String,         // Typically a YouTube video id
                    title: String,       // Title of the video
                    type: String,        // "yt" for YouTube videos, "sc" for soundcloud, etc
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-favorite-add">
        <code class="signature">favorite_add</code>
        Triggered when you have favorited a video. The callback gets an object with the tags used, and
        information about the media.
        <pre>
            <code class="language-javascript">
                {
                    tags: Array,  // Array of strings representing the tags applied to the favorite
                    media: Object // Object describing the video
                }
            </code>
        </pre>
        <p>
            The "media" object contains the following properties.
        </p>
        <pre>
            <code class="language-javascript">
                {
                    id: Number,          // The favorite id
                    seconds: Number,     // The video duration in seconds
                    time: Number,        // Date/time when the video was favorited
                    uid: String,         // Typically a YouTube video id
                    title: String,       // Title of the video
                    type: String,        // "yt" for YouTube videos, "sc" for soundcloud, etc
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-tags">
        <code class="signature">tags</code>
        Triggered when the server sends a list of all tags you have used. The callback gets an array
        of strings, where each string is a tag. For example:
        <pre>
            <code class="language-javascript">
                ["80s", "90s", "Rock", "Kpop"]
            </code>
        </pre>
    </li>
    <li id="topic-api-events-votes">
        <code class="signature">votes</code>
        Triggered when the votes for the currently playing video have changed. The callback gets an
        object with the number of up votes and down votes for the video.
        <pre>
            <code class="language-javascript">
                {
                    up: Number,   // The number of up votes
                    down: Number  // The number of down votes
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-vote-value">
        <code class="signature">vote_value</code>
        Triggered when the vote you gave to the video changes. The callback gets a number that indicates
        how you voted: -1, 1, or 0, indicating whether you down voted, up voted, or remain neutral
        on the vote.
    </li>
    <li id="topic-api-events-emotes-personal">
        <code class="signature">emotes_personal</code>
        Triggered when the server sends your personal emotes. The callback receives an <i>array</i> of
        objects which describe the emote.
        <pre>
            <code class="language-javascript">
                {
                    image: String, // URL of the emote image
                    name: String,  // The string value that triggers the emote
                    regex: RegExp  // Used to find the emote in strings
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-emotes-channel">
        <code class="signature">emotes_channel</code>
        Triggered when the server sends the channel emotes. The callback receives an <i>array</i> of
        objects which describe the emote.
        <pre>
            <code class="language-javascript">
                {
                    image: String, // URL of the emote image
                    name: String,  // The string value that triggers the emote
                    regex: RegExp  // Used to find the emote in strings
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-afk">
        <code class="signature">afk</code>
        Triggered when a user goes afk or comes back from afk. The callback gets an object detailing
        the user and whether they are coming are going into afk.
        <pre>
            <code class="language-javascript">
                {
                    name: String,   // The name of the user
                    afk: Boolean    // True if they are going afk, false if they are coming back
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-profile-menu">
        <code class="signature">profile_menu</code>
        Triggered when the popup profile menu is created for each user in the user list. The callback
        receives a jQuery element with the content of the menu.
    </li>
    <li id="topic-api-events-user-options-save">
        <code class="signature">user_options_save</code>
        Triggered when the user options are being saved. The callback receives an object which represent
        the settings key/value pairs. For example:
        <pre>
            <code class="language-javascript">
                {
                    ignore_channelcss: false
                    ignore_channeljs: false
                    joinmessage: true,
                    show_colors: true
                    show_joins: true
                    show_notices: true,
                    ...
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-channel-option-save">
        <code class="signature">channel_option_save</code>
        Triggered when a single channel option is being saved. Only applicable to admins and mods. The
        callback receives an object which represents the setting key/value pair. For example:
        <pre>
            <code class="language-javascript">
                {
                    join_msg: "Welcome to the lobby!"
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-save-scripts">
        <code class="signature">save_scripts</code>
        Triggered when the scripts are being saved. The callback receives an <i>array</i> of objects which
        have these properties.
        <pre>
            <code class="language-javascript">
                {
                    name: String,  // The name of the script
                    script: String // The script text
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-search-results">
        <code class="signature">search_results</code>
        Triggered with the results of a YouTube search. The callback gets an object which contains
        the results of the search.
        <pre>
            <code class="language-javascript">
                {
                    source: String,   // Always "yt" for YouTube
                    results: Array    // An array of objects representing found videos
                }
            </code>
        </pre>
        <p>
            The "results" property is an array of objects with the following properties.
        </p>
        <pre>
            <code class="language-javascript">
                {
                    duration: String,    // Human readable video duration, e.g. "00:00"
                    seconds: Number,     // The video duration in seconds
                    thumb: Object,       // Contains a "url" property with the thumbnail url
                    uid: String,         // Typically a YouTube video id
                    title: String,       // Title of the video
                    type: String,        // "yt" for YouTube videos, "sc" for soundcloud, etc
                }
            </code>
        </pre>
    </li>
    <li id="topic-api-events-color-change">
        <code class="signature">color_change</code>
        Triggered when the text color is changed. Fires when the page initially loads as well. The
        callback gets a string with the html color code.
    </li>
</ul>

<h5>Event Object</h5>
<p>
    Each time a registered callback is invoked, it receives an event object as the first
    parameter. The event contains two methods.
</p>
<p>
    <code>Event.stop()</code> Called inside your callback will stop any other callbacks from
    processing the event. For example if you have three callbacks registered with the "receive"
    event, and the first callback calls <code>Event.stop()</code>, the other two registered callbacks
    will not be invoked.
</p>
<p>
    <code>Event.cancel()</code> Called inside your callback stops the channel from processing
    the message. For instance, the following code will prevent ALL messages from appearing in the
    chat buffer.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.on("receive", function(e, data) {
            // This causes the channel to completely discard the message, and it won't
            // be shown in your chat buffer.
            e.cancel();
        });
    </code>
</pre>
        
    <a href="#top" class="top">
        <span class="glyphicon glyphicon-chevron-up"></span>
        Back to Top
    </a>

    </section>
    <section class="card">
        <h3 id="topic-api-methods">Methods</h3>
<p>
    The API contains a few methods for interacting with the channel. For instance to send messages,
    queue songs, and vote skip videos.
</p>

<!-- $store.local.set() -->
<code id="topic-api-methods-set-storage" class="signature">$store.local.set(key, value)</code>
<p>
    Saves a value to local storage with the given value. All values are serialized
    before saving. Note that local storage is volatile, and values are not guaranteed
    to exist beyond the current browser session.
</p>
<pre>
    <code class="language-javascript line-numbers">
        // Saving a plain string.
        $store.local.set("gradient_color", "#FF0000");

        // Saving an object.
        $store.local.set("gradient_color", {
            red: 255,
            green: 0,
            blue: 0
        });
    </code>
</pre>

<!-- $store.local.get() -->
<code id="topic-api-methods-get-storage" class="signature">$store.local.get(key, default_value)</code>
<p>
    Returns a value from local storage. Values are automatically unserialized. Returns the
    <code>default_value</code> when the value does not exist in local storage.
    Note that local storage is volatile, and values are not guaranteed
    to exist beyond the current browser session.
</p>
<pre>
    <code class="language-javascript line-numbers">
        // Gets a value from local storage using the key "gradient_color".
        // This will return null if the value does not exist in storage.
        var color = $store.local.get("gradient_color");

        // Same as above, but will return the given default value when the value
        // does not exist in local storage.
        var color = $store.local.get("gradient_color", "#FF0000");
    </code>
</pre>

<!-- $store.local.remove() -->
<code id="topic-api-methods-remove-storage" class="signature">$store.local.remove(key)</code>
<p>
    Removes an item from local storage. Note that local storage is volatile, and values are not guaranteed
    to exist beyond the current browser session.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $store.local.remove("gradient_color");
    </code>
</pre>

<!-- $store.database.set() -->
<code id="topic-api-methods-set-database" class="signature">$store.database.set(key, value, callback)</code>
<p>
    Saves a value to permanent storage in the site database. The <code>key</code> param must be 150
    characters or less. The JSON encoded string value of <code>value</code> must be 1024 characters
    or less. The <code>value</code> argument may be any kind of value, including arrays and objects.
</p>
<p>
    The optional <code>callback</code> argument is invoked when the operation is complete, and is
    passed any error that occurred as the first argument, and the result of the operation as
    the second argument. The second argument is object with the properties "affectedRows" and "changedRows".
</p>
<p>
    NOTE: Each account may only store 100 values in permanent storage.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $store.database.set("gradient_color", "#FF0000", function(err, res) {
            if (err) {
                alert(err);
                return;
            }
            console.log("Affected rows " + res.affectedRows);
        });
    </code>
</pre>

<!-- $store.database.get() -->
<code id="topic-api-methods-get-database" class="signature">$store.database.get(key, default_value, callback)</code>
<p>
    Returns a value from permanent storage in the site's database. Returns the
    <code>default_value</code> when the value does not exist.
</p>
<p>
    The optional <code>callback</code> argument is a function which receives two values: any error that
    occurred and the value from the database.
</p>
<pre>
    <code class="language-javascript line-numbers">
        // The value will be the default if the key does not exist in the database.
        $store.database.get("gradient_colors", "#FF0000", function(err, value) {
            if (err) {
                alert(err);
                return;
            }
            console.log("Got value: " + value);
        });

        // The default argument is optional. Without a default the value will be
        // null when the key does not exist in the database.
        $store.database.get("gradient_colors", function(err, value) {
            if (err) {
                alert(err);
                return;
            }
            console.log("Got value: " + value);
        });
    </code>
</pre>

<!-- $store.database.remove() -->
<code id="topic-api-methods-remove-database" class="signature">$store.database.remove(key, callback)</code>
<p>
    Removes an item from permanent storage in the site's database. The optional <code>callback</code>
    argument is invoked when the operation is complete, and is passed any error that occurred as
    the first argument, and the result of the operation as the second argument. The second argument
    is object with the properties "affectedRows" and "changedRows".
</p>
<pre>
    <code class="language-javascript line-numbers">
        $store.database.remove("gradient_color", function(err, res) {
            if (err) {
                alert(err);
                return;
            }
            console.log("Affected rows " + res.affectedRows);
        });
    </code>
</pre>

<!-- $store.database.keys() -->
<code id="topic-api-methods-keys-database" class="signature">$store.database.keys(prefix, callback)</code>
<p>
    Returns an array of all <i>your</i> keys stored in the database. When <code>prefix</code> is not set
    you will get <i>all</i> of your keys. With <code>prefix</code> set to a non-empty value, you only
    get the keys that start with the given prefix.
</p>
<p>
    The optional <code>callback</code> argument is invoked when the operation is complete, and is
    passed any error that occurred as the first argument, and an array of keys as the second argument.
</p>
<pre>
    <code class="language-javascript line-numbers">
        // Get all keys
        $store.database.keys(function(err, keys) {
            if (err) {
                alert(err);
                return;
            }
            console.log(keys);
        });

        // Get keys prefixed with "foo"
        $store.database.keys("foo", function(err, keys) {
            if (err) {
                alert(err);
                return;
            }
            console.log(keys);
        });
    </code>
</pre>

<!-- $api.send() -->
<code id="topic-api-methods-send" class="signature">$api.send(msg, meta)</code>
<p>
    Sends a message to everyone else in the chat room. The value of <code>msg</code> must be a string,
    which contains the message. The <code>meta</code> value is an object which may contain a property
    named "color", which sets the color of the text.
</p>
<pre>
    <code class="language-javascript line-numbers">
        // Will send the message "Hey everyone, headzoo has arrived!" or whatever
        // your username is.
        $api.send("Hey everyone, I have arrived!");

        // Same message, but set the text color to green.
        $api.send("Hey everyone, I have arrived!", { color: "#00FF00" });
    </code>
</pre>

<!-- $api.notice() -->
<code id="topic-api-methods-notice" class="signature">$api.notice(msg, is_error)</code>
<p>
    Writes the given notice message to your chat buffer. Set <code>is_error</code> to true
    to show an error notice.
</p>
<pre>
    <code class="language-javascript line-numbers">
        // Shows a regular notice.
        $api.notice("Your song has been queued.");

        // Shows an error notice.
        $api.notice("Could not find song.", true);
    </code>
</pre>

<!-- $api.command() -->
<code id="topic-api-methods-command" class="signature">$api.command(to, data)</code>
<p>
    Sends a command to other bots. The <code>to</code> argument must be the name of a user
    in the channel, or the pound sign "#" to broadcast the message to the whole room. The
    <code>data</code> argument may contain any kind of data, including strings, numbers,
    objects and arrays.
</p>
<pre>
    <code class="language-javascript line-numbers">
        // Send command to single user (bot)
        $api.command("headzoo", {
            move: "up",
            pos: 3
        });

        // Broadcast command to entire channel
        $api.command("#", {
            move: "up",
            pos: 3
        });
    </code>
</pre>

<!-- $api.toast() -->
<code id="topic-api-methods-toast" class="signature">$api.toast(msg, type, time_out)</code>
<p>
    Displays a popup message in the corner of the page. Valid values for <code>type</code> are
    "success", "warning", and "error". Defaults to "success". The <code>time_out</code> argument
    specifies how long the message is shown in milliseconds before fading out.
</p>
<p>
    See <a href="http://codeseven.github.io/toastr/demo.html" target="_blank">
        http://codeseven.github.io/toastr/demo.html
    </a>
</p>
<pre>
    <code class="language-javascript line-numbers">
        // Show a success message.
        $api.toast("Your song has been queued.");

        // Show a warning message.
        $api.toast("Could not find user.", "warning");

        // Show an error message.
        $api.toast("Failed to complete action.", "error");
    </code>
</pre>

<!-- $api.queue() -->
<code id="topic-api-methods-queue" class="signature">$api.queue(video)</code>
<p>
    Adds a video to the playlist. The value of the <code>video</code> argument may be one of two things:<br />
    String: A media url, such as the url to a YouTube video.<br />
    Object: A media object. Must contain the properties "uid", "type", and "title".
</p>
<pre>
    <code class="language-javascript line-numbers">
        // Queue a video from a media url.
        $api.queue("https://www.youtube.com/watch?v=OsCfufAp2tM");

        // Queue a video using a media object.
        $api.queue({
            type: "yt",                   // It's a YouTube video
            uid: "OsCfufAp2tM",           // The id of the video
            title: "Grimes - California"  // The title of the video
        });
    </code>
</pre>

<!-- $api.dequeueByName() -->
<code id="topic-api-methods-dequeue-by-name" class="signature">$api.dequeueByName(username)</code>
<p>
    Removes videos from the playlist that have been queued by the given user.
    Only applicable to moderators.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.dequeueByName("headzoo");
    </code>
</pre>

<!-- $api.skip() -->
<code id="topic-api-methods-skip" class="signature">$api.skip()</code>
<p>
    Vote skips the currently playing video.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.skip();
    </code>
</pre>

<!-- $api.vote() -->
<code id="topic-api-methods-vote" class="signature">$api.vote(value)</code>
<p>
    Votes for the currently playing video. Valid values for the <code>value</code> are 1 to up vote
    the video, or -1 to down vote the video. Calling the method a second time with the same value
    toggles the vote.
</p>
<pre>
    <code class="language-javascript line-numbers">
        // Up vote the video.
        $api.vote(1);

        // Take back the up vote by calling again with the same value.
        $api.vote(1);

        // Down vote the video.
        $api.vote(-1);

        // Take back the down vote by calling again with the same value.
        $api.vote(-1);
    </code>
</pre>

<!-- $api.playlistClear() -->
<code id="topic-api-methods-playlist-clear" class="signature">$api.playlistClear()</code>
<p>
    Clears the playlist. Only applicable to chat moderators.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.playlistClear();
    </code>
</pre>

<!-- $api.playlistShuffle() -->
<code id="topic-api-methods-playlist-shuffle" class="signature">$api.playlistShuffle()</code>
<p>
    Shuffles the playlist. Only applicable to chat moderators.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.playlistShuffle();
    </code>
</pre>

<!-- $api.playlistLock() -->
<code id="topic-api-methods-playlist-lock" class="signature">$api.playlistLock()</code>
<p>
    Toggles the playlist lock on and off. Only applicable to chat moderators.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.playlistLock();
    </code>
</pre>

<!-- $api.search() -->
<code id="topic-api-methods-search" class="signature">$api.search(query, type)</code>
<p>
    Searches YouTube for videos matching the given <code>query</code> argument. The <code>type</code>
    argument defaults to "yt" and is currently ignored. Used in conjunction with the
    <code>search_results</code> event.
</p>
<pre>
    <code class="language-javascript line-numbers">
        // Register an event which receives the search results.
        $api.on("search_results", function(e, data) {
            if (data.results.length > 0) {
                $api.queue(data.results[0]);
            }
        });

        // Now perform the search.
        $api.search("Grimes");
    </code>
</pre>

<!-- $api.clear() -->
<code id="topic-api-methods-clear" class="signature">$api.clear()</code>
<p>
    Clears the chat buffer.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.clear();
    </code>
</pre>

<!-- $api.color() -->
<code id="topic-api-methods-color" class="signature">$api.color(hex_code)</code>
<p>
    Sets the chat text color.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.color("#c13b3b");
    </code>
</pre>

<!-- $api.ignore() -->
<code id="topic-api-methods-ignore" class="signature">$api.ignore(name)</code>
<p>
    Puts the named user on ignore.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.ignore("az4521");
    </code>
</pre>

<!-- $api.unignore() -->
<code id="topic-api-methods-unignore" class="signature">$api.unignore(name)</code>
<p>
    Takes the named user off ignore.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.unignore("az4521");
    </code>
</pre>

<!-- $api.kick() -->
<code id="topic-api-methods-kick" class="signature">$api.kick(name, reason)</code>
<p>
    Kicks the named user from the chat room with the optional reason.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.kick("az4521", "Being a troll.");
    </code>
</pre>

<!-- $api.mute() -->
<code id="topic-api-methods-mute" class="signature">$api.mute(name)</code>
<p>
    Mutes the named user. Only applicable to moderators.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.mute("az4521");
    </code>
</pre>

<!-- $api.smute() -->
<code id="topic-api-methods-smute" class="signature">$api.smute(name)</code>
<p>
    Shadow mutes the named user. Only applicable to moderators.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.smute("az4521");
    </code>
</pre>

<!-- $api.unmute() -->
<code id="topic-api-methods-unmute" class="signature">$api.unmute(name)</code>
<p>
    Unmutes the named user. Only applicable to moderators.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.unmute("az4521");
    </code>
</pre>

<!-- $api.banByName() -->
<code id="topic-api-methods-ban-by-name" class="signature">$api.banByName(name, reason)</code>
<p>
    Bans the named user by their username with an optional reason. Only applicable to moderators.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.banByName("az4521", "Being a troll.");
    </code>
</pre>

<!-- $api.banByIP() -->
<code id="topic-api-methods-ban-by-ip" class="signature">$api.banByIP(name, reason)</code>
<p>
    Bans the named user by their IP address with an optional reason. Only applicable to moderators.
</p>
<pre>
    <code class="language-javascript line-numbers">
        $api.banByIP("az4521", "Being a troll.");
    </code>
</pre>
        
    <a href="#top" class="top">
        <span class="glyphicon glyphicon-chevron-up"></span>
        Back to Top
    </a>

    </section>
    <section class="card">
        <h3 id="topic-examples">Examples</h3>
<h5 id="topic-api-examples-favorites">Queuing Favorites</h5>
<p>
    A user script that automatically queues one of your favorite videos every
    30 minutes.
</p>
<pre>
    <code class="language-javascript line-numbers">
        // The "favorites" event is called when you enter chat. Save the favorites to a local variable.
        var favorites = [];
        $api.on("favorites", function(e, data) {
            favorites = data;
        });
    
        // Called when you add a new favorite. Add it to the list of favorites we're keeping track of.
        $api.on("favorite_add", function(e, data) {
            favorites.push(data.media);
        });

        // Every 30 minutes, grab one of the favorites at random, and add it to the playlist.
        setInterval(function() {
            var item = favorites[Math.floor(Math.random() * favorites.length)];
            if (item) {
                $api.queue(item);
            }
        }, 1800000); // 30 minutes in milliseconds
    </code>
</pre>

<h5 id="topic-api-examples-lucky">I'm Feeling Lucky</h5>
<p>
    Creates a <code>/lucky</code> command, which searches YouTube with a given search term,
    and queues the first video found. Install the script, and then type a search query into
    the chatbox using the command. For example: <code>/lucky grimes kill v maim</code>
</p>
<pre>
    <code class="language-javascript line-numbers">
        // Register a callback which gets every message we send to the server. We'll use this
        // to parse our messages for the "/lucky" command.
        $api.on("send", function(e, data) {
            if (data.msg.indexOf("/lucky ") === 0) {
                // We search when the message starts with the /lucky command.
                $api.search(data.msg.replace("/lucky ", ""));
        
                // Stop the message from being sent to the other users.
                e.cancel();
            }
        });

        // Register a callback to receive the search results. This gets called with the results of
        // calling the the $api.search() method.
        $api.on("search_results", function(e, data) {
            if (data.results.length > 0) {
                // Queue the first video found in the results.
                $api.queue(data.results[0]);
            }
        });
    </code>
</pre>
        
    <a href="#top" class="top">
        <span class="glyphicon glyphicon-chevron-up"></span>
        Back to Top
    </a>

    </section>
</div>
            </div>
            <div style="clear: left;"></div>
        </div>
    </div>
    <footer>
        <p>Copyright  2016 upnext.fm</p>
        <p>
            <a href="https://upnext.fm">upnext.fm</a> &middot;
            <a href="https://github.com/upnextfm/scripts">GitHub</a> &middot;
            <a href="meta.json">meta.json</a> &middot;
            <a href="https://upnext.fm/contact">Contact</a>
        </p>
        <p>
            <img src="images/logo-footer.png" />
        </p>
    </footer>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="assets/prism.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.5.10/clipboard.min.js"></script>
    <script>
        var url = document.location.toString();
        if (url.match('#')) {
            var part = url.split('#')[1];
            if (part.indexOf("topic-") !== -1 || part.indexOf("docs") !== -1) {
                $('.nav-tabs a[href="#docs"]').tab('show');
            } else {
                $('.nav-tabs a[href="#scripts"]').tab('show');
            }
        }
        $('.nav-tabs a').on('shown.bs.tab', function () {
            window.location.hash = "";
        });
        
        new Clipboard('.btn', {
            target: function(trigger) {
                return $(trigger).parents(".input-group").find("input")[0];
            }
        });
        //$(function() {
        //    $('.nav-tabs a[href="#docs"]').tab('show');
        //});
    </script>
    </body>
</html>